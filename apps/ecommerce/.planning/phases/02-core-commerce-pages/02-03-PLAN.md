---
phase: 02-core-commerce-pages
plan: 03
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/app/shop/page.tsx
  - src/app/products/[slug]/page.tsx
  - src/components/product/ImageGallery.tsx
  - src/components/product/ProductInfo.tsx
  - src/components/product/ProductCallouts.tsx
  - src/components/product/QuantitySelector.tsx
autonomous: true

must_haves:
  truths:
    - "Shop page at /shop displays all 4 products in a responsive grid (1 col mobile, 2 cols sm, 3-4 cols desktop)"
    - "Each product card on the shop page links to its detail page at /products/{slug}"
    - "Product detail page at /products/{slug} renders for all 4 products with correct data"
    - "Product detail page shows image gallery with thumbnail navigation"
    - "Product detail page shows product name, size, price, star rating, callouts, and description"
    - "Product detail page has a working quantity selector (increment/decrement between 1-10)"
    - "Product detail page has an Add to Cart button placeholder"
    - "Invalid product slugs show Next.js 404 page"
  artifacts:
    - path: "src/app/shop/page.tsx"
      provides: "Shop page with product grid and metadata"
      contains: "metadata"
    - path: "src/app/products/[slug]/page.tsx"
      provides: "Dynamic product detail page with static generation"
      contains: "generateStaticParams"
    - path: "src/components/product/ImageGallery.tsx"
      provides: "Client-side image gallery with thumbnail switching"
      contains: "use client"
    - path: "src/components/product/ProductInfo.tsx"
      provides: "Product info display (name, size, price, rating)"
      exports: ["default"]
    - path: "src/components/product/ProductCallouts.tsx"
      provides: "Product callout badges"
      exports: ["default"]
    - path: "src/components/product/QuantitySelector.tsx"
      provides: "Client-side quantity selector with +/- buttons"
      contains: "use client"
  key_links:
    - from: "src/app/shop/page.tsx"
      to: "src/components/ui/ProductCard.tsx"
      via: "renders ProductCard for each product"
      pattern: "ProductCard"
    - from: "src/app/products/[slug]/page.tsx"
      to: "src/data/products.ts"
      via: "getProductBySlug for data lookup and generateStaticParams"
      pattern: "getProductBySlug"
    - from: "src/app/products/[slug]/page.tsx"
      to: "src/components/product/ImageGallery.tsx"
      via: "passes product images to gallery"
      pattern: "ImageGallery"
    - from: "src/app/products/[slug]/page.tsx"
      to: "src/components/product/QuantitySelector.tsx"
      via: "renders interactive quantity selector"
      pattern: "QuantitySelector"
    - from: "src/app/products/[slug]/page.tsx"
      to: "next/navigation"
      via: "notFound() for invalid slugs"
      pattern: "notFound"
---

<objective>
Build the Shop page and Product Detail pages with image gallery, product information, callouts, and quantity selector.

Purpose: Shop page is the product catalog view. Product Detail pages are where purchase decisions happen -- they must clearly present product information, build confidence through callouts, and provide an easy path to purchase.

Output: Shop page at `/shop` with responsive product grid. Product detail pages at `/products/[slug]` with image gallery, full product info, callouts, quantity selector, and Add to Cart placeholder.
</objective>

<execution_context>
@/Users/rfmstaff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rfmstaff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-commerce-pages/02-RESEARCH.md
@.planning/phases/02-core-commerce-pages/02-01-SUMMARY.md

@src/types/product.ts
@src/data/products.ts
@src/lib/utils.ts
@src/app/globals.css
@src/components/ui/ProductCard.tsx
@src/components/ui/StarRating.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Shop page with product grid</name>
  <files>
    src/app/shop/page.tsx
  </files>
  <action>
1. **Create Shop page** at `src/app/shop/page.tsx` (SHOP-01, SHOP-02, SHOP-03):
   - Server Component (no 'use client')
   - Import `products` from `@/data/products` and `ProductCard` from `@/components/ui/ProductCard`
   - Export metadata:
     ```typescript
     import { Metadata } from 'next'

     export const metadata: Metadata = {
       title: 'Shop Authentic Jamaican Sauces | Jamaica House Brand',
       description: 'Browse our collection of handcrafted Jamaican sauces. Original Jerk Sauce in 2oz, 5oz, and 10oz sizes, plus our Escovitch Pikliz.',
       openGraph: {
         title: 'Shop Jamaica House Brand Sauces',
         description: 'Handcrafted Jamaican sauces from a 30-year family recipe.',
       },
     }
     ```
   - Page layout structure:
     - Outer wrapper: `pt-8 sm:pt-12 pb-16 sm:pb-24 px-4`
     - Container: `max-w-7xl mx-auto`
     - Page header section:
       - `<h1>` "Shop Our Sauces" in `text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-4`
       - Subtitle: "Handcrafted from a 30-year family recipe. Zero calories. All natural." in `text-gray-400 text-lg mb-12 max-w-2xl`
     - Product grid: `grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 sm:gap-8`
     - Map `products` to `<ProductCard key={product.id} product={product} />`
   - SHOP-03 (hover state with lifestyle image) is handled by ProductCard's `group-hover:scale-105` image zoom from Plan 01. The hover zoom effect serves as the desktop hover state enhancement since separate lifestyle images are not available.
  </action>
  <verify>
```bash
cd /Users/rfmstaff/Desktop/jamaica-house-brand && npx tsc --noEmit
```
Verify shop route exists:
```bash
ls -la /Users/rfmstaff/Desktop/jamaica-house-brand/src/app/shop/page.tsx
```
  </verify>
  <done>
Shop page at `/shop` renders all 4 products in a responsive grid (1 col mobile, 2 cols tablet, 3-4 cols desktop). Each product shows via ProductCard with image, name, size, price, rating, and quick-add button. Page has SEO metadata. Product cards have hover states (image zoom, border glow).
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Product Detail page with info, callouts, and gallery</name>
  <files>
    src/app/products/[slug]/page.tsx
    src/components/product/ImageGallery.tsx
    src/components/product/ProductInfo.tsx
    src/components/product/ProductCallouts.tsx
  </files>
  <action>
1. **Create ImageGallery** at `src/components/product/ImageGallery.tsx` (PROD-01):
   - **Client Component** (`'use client'`) -- needs state for active image selection
   - Props: `images: string[]`, `productName: string`
   - Main image area: `relative aspect-square bg-white/5 rounded-lg overflow-hidden`
   - Use `next/image` with `fill` and `sizes="(max-width: 768px) 100vw, 50vw"` and `className="object-cover"`
   - First image gets `preload={true}` (LCP element on product pages; `priority` is deprecated in Next.js 16)
   - Thumbnail row below: `grid grid-cols-3 sm:grid-cols-4 gap-2 mt-4`
   - Each thumbnail is a `<button>` with `relative aspect-square rounded overflow-hidden border-2 transition-colors`
   - Active thumbnail: `border-brand-gold`, inactive: `border-transparent hover:border-brand-gold/40`
   - Clicking thumbnail updates `activeIndex` state
   - Use `next/image` for thumbnails too with `fill` and `sizes="25vw"`
   - Accessible: each thumbnail button has `aria-label="View image {index + 1} of {productName}"`
   - Handle edge case: if images array has only 1 image, hide thumbnail row

2. **Create ProductInfo** at `src/components/product/ProductInfo.tsx` (PROD-02, PROD-05):
   - Server Component
   - Props: `product: Product` (import from `@/types/product`)
   - Layout:
     - Product name: `<h1>` with `text-3xl md:text-4xl font-bold text-white mb-2`
     - Product size: `<span>` with `text-lg text-gray-400 mb-4 block`
     - StarRating component with `product.rating`
     - Price: `formatPrice(product.price)` in `text-3xl font-bold text-brand-gold mt-4 mb-6`
     - Divider: `<hr className="border-brand-gold/20 my-6" />`
     - Description heading: "About This Product" in `text-lg font-semibold text-white mb-3`
     - Description text: `product.description` in `text-gray-300 leading-relaxed`
     - In-stock indicator: If `product.inStock`, show green dot + "In Stock" text in `text-green-500 text-sm mt-4`. If not, show "Out of Stock" in red.

3. **Create ProductCallouts** at `src/components/product/ProductCallouts.tsx` (PROD-03):
   - Server Component
   - Props: `callouts: string[]`
   - Render as a horizontal flex row that wraps: `flex flex-wrap gap-3 my-6`
   - Each callout is a badge: `inline-flex items-center gap-2 px-4 py-2 rounded-full bg-brand-gold/10 border border-brand-gold/30 text-brand-gold text-sm font-medium`
   - Add a small inline SVG icon before each callout text:
     - "Zero Calories" -> a checkmark SVG
     - "All Natural" -> a leaf SVG (simple inline)
     - "30-Year Recipe" -> a clock/timer SVG (simple inline)
     - For any other callout -> a checkmark SVG as default
   - Match icon to callout text using a simple mapping object inside the component

4. **Create Product Detail page** at `src/app/products/[slug]/page.tsx`:
   - Server Component (page-level), imports Client Components as leaves
   - Import `Metadata` from `next`, `getProductBySlug`, `products` from `@/data/products`, `notFound` from `next/navigation`
   - Type: `type Props = { params: Promise<{ slug: string }> }` (Next.js 16 async params)
   - `generateStaticParams`: return `products.map(p => ({ slug: p.slug }))` for static generation of all 4 product pages
   - `generateMetadata`: await params, look up product, return title as `{product.name} {product.size} | Jamaica House Brand`, description as `product.description`, and openGraph with product image
   - Default export: async function, `await params`, `getProductBySlug(slug)`, if not found call `notFound()`
   - Page layout: Two-column on desktop, stacked on mobile
     ```
     <div className="pt-8 sm:pt-12 pb-16 sm:pb-24 px-4">
       <div className="max-w-7xl mx-auto">
         <div className="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
           {/* Left column: Image Gallery */}
           <ImageGallery images={product.images} productName={product.name} />

           {/* Right column: Product Info */}
           <div>
             <ProductInfo product={product} />
             <ProductCallouts callouts={product.callouts} />
             {/* QuantitySelector + Add to Cart from Task 3 */}
           </div>
         </div>
       </div>
     </div>
     ```
  </action>
  <verify>
```bash
cd /Users/rfmstaff/Desktop/jamaica-house-brand && npx tsc --noEmit
```
Verify dynamic route structure:
```bash
ls -la /Users/rfmstaff/Desktop/jamaica-house-brand/src/app/products/\[slug\]/page.tsx
```
  </verify>
  <done>
Product detail pages render at `/products/jerk-sauce-2oz`, `/products/jerk-sauce-5oz`, `/products/jerk-sauce-10oz`, `/products/escovitch-pikliz-12oz`. Each page shows image gallery with thumbnail navigation, product name, size, price, star rating, callouts, and description. Invalid slugs return 404. Pages are statically generated via generateStaticParams.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create QuantitySelector and wire Add to Cart placeholder</name>
  <files>
    src/components/product/QuantitySelector.tsx
    src/app/products/[slug]/page.tsx
  </files>
  <action>
1. **Create QuantitySelector** at `src/components/product/QuantitySelector.tsx` (PROD-04):
   - **Client Component** (`'use client'`)
   - Props: `min?: number` (default 1), `max?: number` (default 10), `onChange?: (quantity: number) => void`
   - State: `const [quantity, setQuantity] = useState(min)`
   - Handler: `handleChange(newQuantity: number)` that clamps between min and max, updates state, calls onChange
   - Layout: `flex items-center gap-3`
   - Decrement button: `<button>` with `w-11 h-11 flex items-center justify-center bg-white/5 border border-brand-gold/30 text-white rounded-lg hover:bg-brand-gold/10 disabled:opacity-40 disabled:cursor-not-allowed transition-colors`. Content: minus sign (use unicode minus U+2212). `disabled={quantity <= min}`. `aria-label="Decrease quantity"`.
   - Quantity display: `<input type="number">` with `w-16 h-11 text-center bg-white/5 border border-brand-gold/30 text-white rounded-lg font-semibold [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none` (hide native spin buttons). `min`, `max` attributes. `aria-label="Quantity"`.
   - Increment button: Same style as decrement but plus sign and `disabled={quantity >= max}`. `aria-label="Increase quantity"`.
   - Minimum touch target: buttons are w-11 h-11 (44px) for WCAG 2.5.5

2. **Update Product Detail page** (`src/app/products/[slug]/page.tsx`) to include QuantitySelector and Add to Cart:
   - Import `QuantitySelector` from `@/components/product/QuantitySelector`
   - Add below ProductCallouts in the right column:
     ```tsx
     <div className="mt-8 space-y-4">
       <QuantitySelector />
       <button
         type="button"
         className="w-full bg-brand-gold text-brand-dark font-bold text-lg py-4 rounded-lg hover:bg-brand-gold-light transition-colors"
       >
         Add to Cart
       </button>
     </div>
     ```
   - The Add to Cart button is a **static placeholder** for Phase 2 -- it renders but has no onClick handler. Cart functionality will be wired in Phase 3.
   - NOTE: The button is in the Server Component page, not a Client Component, so it will not have an onClick. That is intentional -- it is a visual placeholder. Phase 3 will replace this with an actual Client Component AddToCartButton.
  </action>
  <verify>
```bash
cd /Users/rfmstaff/Desktop/jamaica-house-brand && npx tsc --noEmit
```
Build to verify all routes compile:
```bash
cd /Users/rfmstaff/Desktop/jamaica-house-brand && npx next build 2>&1 | tail -30
```
  </verify>
  <done>
QuantitySelector increments/decrements between 1-10 with accessible +/- buttons and 44px touch targets. Add to Cart button renders with gold brand styling as a visual placeholder for Phase 3. Product detail pages are complete with all sections: gallery, info, callouts, quantity selector, and Add to Cart button.
  </done>
</task>

</tasks>

<verification>
- `npx next build` completes without errors
- Shop page at `/shop` shows all 4 products in responsive grid
- Product detail page at `/products/jerk-sauce-5oz` renders full product info
- Product detail page at `/products/nonexistent` returns 404
- Image gallery allows clicking thumbnails to change main image
- Quantity selector increments/decrements with keyboard and click
- All pages are mobile-responsive
- Build output shows product pages as static (not dynamic)
</verification>

<success_criteria>
Shop page displays responsive product grid with all 4 SKUs (SHOP-01, SHOP-02, SHOP-03). Product detail pages render for all 4 products with image gallery (PROD-01), product info with name/size/price/rating (PROD-02), callout badges (PROD-03), quantity selector (PROD-04), and product description (PROD-05). Navigation works between Home, Shop, and Product Detail pages. All pages use dark premium aesthetic.
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-commerce-pages/02-03-SUMMARY.md`
</output>
