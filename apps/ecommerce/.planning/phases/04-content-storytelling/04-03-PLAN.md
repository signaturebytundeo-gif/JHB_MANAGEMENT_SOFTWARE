---
phase: 04-content-storytelling
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/app/recipes/page.tsx
  - src/app/recipes/[slug]/page.tsx
  - src/components/recipes/RecipeCard.tsx
  - src/components/recipes/RecipeGrid.tsx
  - src/components/recipes/RecipeHero.tsx
  - src/components/recipes/IngredientList.tsx
  - src/components/recipes/InstructionSteps.tsx
  - src/components/recipes/ShopTheSauceCTA.tsx
autonomous: true

must_haves:
  truths:
    - "Recipes page at /recipes displays a grid of 6 recipe cards"
    - "Each recipe card shows food photography, title, description, and cook time"
    - "Clicking a recipe card navigates to /recipes/{slug} detail page"
    - "Recipe detail page shows hero image, ingredient list, and step-by-step instructions"
    - "Recipe detail page includes 'Shop the sauce' CTA with linked product(s)"
    - "All recipes feature Jamaica House Brand products as key ingredients"
  artifacts:
    - path: "src/app/recipes/page.tsx"
      provides: "Recipes grid page route as Server Component"
      contains: "export default function"
    - path: "src/app/recipes/[slug]/page.tsx"
      provides: "Recipe detail page with dynamic slug routing"
      contains: "generateRecipeJsonLd"
    - path: "src/components/recipes/RecipeCard.tsx"
      provides: "Individual recipe card for grid display"
      contains: "Image"
    - path: "src/components/recipes/RecipeGrid.tsx"
      provides: "Responsive grid layout for recipe cards"
      contains: "grid"
    - path: "src/components/recipes/ShopTheSauceCTA.tsx"
      provides: "Product CTA section linking recipes to products"
      contains: "getProductById"
  key_links:
    - from: "src/app/recipes/page.tsx"
      to: "src/data/recipes.ts"
      via: "imports recipes array for grid"
      pattern: "import.*recipes.*from.*data/recipes"
    - from: "src/app/recipes/[slug]/page.tsx"
      to: "src/data/recipes.ts"
      via: "imports getRecipeBySlug for detail lookup"
      pattern: "import.*getRecipeBySlug.*from.*data/recipes"
    - from: "src/app/recipes/[slug]/page.tsx"
      to: "src/lib/seo.ts"
      via: "imports generateRecipeJsonLd for schema.org markup"
      pattern: "import.*generateRecipeJsonLd.*from.*lib/seo"
    - from: "src/components/recipes/ShopTheSauceCTA.tsx"
      to: "src/data/products.ts"
      via: "imports getProductById to resolve product references"
      pattern: "import.*getProductById.*from.*data/products"
---

<objective>
Build the Recipes section: a grid page at /recipes showing 6 recipe cards, and dynamic detail pages at /recipes/[slug] with hero image, ingredients, instructions, schema.org JSON-LD, and a "Shop the sauce" CTA linking to featured products.

Purpose: Recipes create product demand by showing customers how to use Jamaica House Brand sauces. Each recipe page is a conversion opportunity via the product CTA.
Output: 2 page routes + 6 components
</objective>

<execution_context>
@/Users/rfmstaff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rfmstaff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-content-storytelling/04-RESEARCH.md
@.planning/phases/04-content-storytelling/04-01-SUMMARY.md

# Data files from Plan 01:
@src/types/recipe.ts
@src/data/recipes.ts
@src/lib/seo.ts

# Existing product data for CTA:
@src/data/products.ts
@src/types/product.ts

# Existing component pattern to follow:
@src/components/ui/ProductCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create recipe components (RecipeCard, RecipeGrid, RecipeHero, IngredientList, InstructionSteps, ShopTheSauceCTA)</name>
  <files>
    src/components/recipes/RecipeCard.tsx
    src/components/recipes/RecipeGrid.tsx
    src/components/recipes/RecipeHero.tsx
    src/components/recipes/IngredientList.tsx
    src/components/recipes/InstructionSteps.tsx
    src/components/recipes/ShopTheSauceCTA.tsx
  </files>
  <action>
**Create src/components/recipes/RecipeCard.tsx** (Server Component):
- Props: recipe (Recipe type)
- Renders as a Link to `/recipes/${recipe.slug}`
- Image: Next.js Image with fill, aspect-[4/3] container, overflow-hidden rounded-lg, sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw", quality={75}
- Hover effect: group class on Link, image scales (group-hover:scale-110 transition-transform duration-300)
- Title: text-xl font-semibold text-white mt-4
- Description: text-gray-400 mt-2, line-clamp-2 for truncation
- Metadata row: flex gap-4 text-sm text-gray-500 mt-2 showing total time ({prepTime + cookTime} min) and servings
- Difficulty badge: small colored badge (easy=green, medium=gold, hard=red) with text-xs uppercase

**Create src/components/recipes/RecipeGrid.tsx** (Server Component):
- Props: recipes (Recipe[])
- Layout: grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8
- Maps over recipes array rendering RecipeCard for each
- No client-side interactivity needed — pure layout component

**Create src/components/recipes/RecipeHero.tsx** (Server Component):
- Props: recipe (Recipe type)
- Full-width hero: relative h-[60vh] md:h-[70vh]
- Next.js Image with fill, preload={true} (this is the LCP element), quality={85}, sizes="100vw", objectFit cover
- Dark gradient overlay: absolute inset-0 bg-gradient-to-t from-brand-dark via-brand-dark/50 to-transparent
- Content at bottom: absolute bottom-0 left-0 right-0 p-8 md:p-16
- Title: text-4xl md:text-6xl font-bold text-white
- Metadata: flex gap-6 mt-4 text-gray-300 — prepTime, cookTime, servings, difficulty

**Create src/components/recipes/IngredientList.tsx** (Server Component):
- Props: ingredients (Ingredient[])
- Heading: "Ingredients" text-2xl font-bold text-brand-gold mb-6
- Unordered list with ingredient items
- Each item: flex items-baseline gap-2 py-2 border-b border-white/10
- Amount in text-brand-gold font-medium, item name in text-white, notes in text-gray-400 italic
- Clean, easy-to-read list formatting

**Create src/components/recipes/InstructionSteps.tsx** (Server Component):
- Props: instructions (Instruction[])
- Heading: "Instructions" text-2xl font-bold text-brand-gold mb-6
- Ordered list with numbered steps
- Each step: flex gap-4 mb-6
- Step number: flex-shrink-0 w-10 h-10 bg-brand-gold text-brand-dark rounded-full flex items-center justify-center font-bold text-lg
- Step text: text-gray-300 text-lg leading-relaxed
- If instruction has image, render below step text with Next.js Image

**Create src/components/recipes/ShopTheSauceCTA.tsx** (Server Component):
- Props: productIds (string[])
- Import getProductById from @/data/products and ProductCard from @/components/ui/ProductCard (if it accepts Product prop) or build inline product cards
- Resolve each product ID to a Product object using getProductById
- Filter out undefined results (in case of mismatched IDs)
- Section: bg-white/5 border border-white/10 rounded-lg p-8 mt-12
- Heading: "Shop the Sauce Used in This Recipe" text-2xl font-bold text-brand-gold mb-6 (RCPE-03)
- Display product cards in a grid: grid-cols-1 sm:grid-cols-2 gap-6
- Each card: product image (w-24 h-24), name, size, price (use formatPrice from @/lib/utils), and a Link to /shop or /products/{slug}
- Also include a general "Shop All Products" link (Link to /shop) as secondary CTA
  </action>
  <verify>
Run `npx tsc --noEmit` — zero errors. Verify all 6 component files exist. Check ShopTheSauceCTA imports getProductById. Check RecipeHero uses preload={true} on Image. Check RecipeCard links to /recipes/{slug}.
  </verify>
  <done>
6 recipe components created. RecipeCard links to detail pages. RecipeGrid provides responsive grid. RecipeHero uses preload for LCP. IngredientList and InstructionSteps render recipe content. ShopTheSauceCTA resolves product IDs and shows "Shop the sauce" with links.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Recipes grid page and Recipe detail page with JSON-LD</name>
  <files>
    src/app/recipes/page.tsx
    src/app/recipes/[slug]/page.tsx
  </files>
  <action>
**Create src/app/recipes/page.tsx** (Server Component):

Import RecipeGrid from @/components/recipes/RecipeGrid and recipes from @/data/recipes (use getAllRecipes or the recipes array directly).

Export metadata:
```typescript
export const metadata: Metadata = {
  title: 'Recipes - Jamaica House Brand',
  description: 'Discover authentic Jamaican recipes featuring Jamaica House Brand sauces. From jerk chicken to escovitch fish, bring restaurant flavors to your kitchen.',
  openGraph: {
    title: 'Recipes - Jamaica House Brand',
    description: 'Authentic Jamaican recipes featuring our signature sauces.',
    images: ['/images/recipes/og-recipes.jpg'],
  },
}
```

Page layout:
- `<main className="bg-brand-dark min-h-screen">`
- Hero-like header section: py-24 px-4 text-center
  - Title: "Recipes" text-5xl md:text-6xl font-bold text-white
  - Subtitle: "Bring the authentic Jamaica House flavor to your kitchen" text-xl text-gray-300 mt-4 max-w-2xl mx-auto
- RecipeGrid section: max-w-7xl mx-auto px-4 pb-24
  - Pass all recipes to RecipeGrid
- Bottom CTA: "Want more recipes? Follow us on Instagram" or similar, linking to shop

**Create src/app/recipes/[slug]/page.tsx** (Server Component):

Imports:
- getRecipeBySlug from @/data/recipes
- generateRecipeJsonLd from @/lib/seo
- notFound from next/navigation
- Metadata type from next
- All recipe detail components: RecipeHero, IngredientList, InstructionSteps, ShopTheSauceCTA

**generateStaticParams** function:
```typescript
import { recipes } from '@/data/recipes'
export function generateStaticParams() {
  return recipes.map((recipe) => ({ slug: recipe.slug }))
}
```
This pre-generates all recipe pages at build time for performance.

**generateMetadata** function:
- Look up recipe by slug
- Return title: `${recipe.title} - Jamaica House Brand Recipes`
- Description: recipe.description
- OpenGraph with recipe images

**Page component:**
- Look up recipe with getRecipeBySlug(params.slug)
- If not found, call notFound()
- Inject schema.org JSON-LD: `<script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(generateRecipeJsonLd(recipe)) }} />`
- Layout structure:
  1. RecipeHero (full-width hero image)
  2. Content section: max-w-4xl mx-auto px-4 py-12
     - Two-column layout on desktop (md:grid md:grid-cols-[1fr_2fr] gap-12):
       - Left column: IngredientList
       - Right column: InstructionSteps
     - On mobile: single column (ingredients above instructions)
  3. ShopTheSauceCTA (pass recipe.featuredProducts)

**NOTE on Next.js 16 params:** In Next.js 16, page params are accessed via `params` prop but may need to be awaited. Use:
```typescript
export default async function RecipePage({ params }: { params: Promise<{ slug: string }> }) {
  const { slug } = await params
  const recipe = getRecipeBySlug(slug)
  // ...
}
```
Similarly for generateMetadata. Check the existing products/[slug]/page.tsx pattern for reference.
  </action>
  <verify>
Run `npm run build` — all recipe pages build without errors (including all 6 static params). Navigate to /recipes in dev server — grid shows 6 recipe cards. Click a card — detail page renders with hero, ingredients, instructions, and Shop CTA. View page source on detail page — JSON-LD script tag present with @type: "Recipe". Verify ShopTheSauceCTA renders actual product names/links.
  </verify>
  <done>
/recipes page shows grid of 6 recipe cards. Each /recipes/[slug] page renders hero image, ingredients, instructions, JSON-LD, and "Shop the sauce" CTA with linked products. All pages build as static pages via generateStaticParams. SEO metadata configured for both pages.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` passes — all pages build successfully
2. /recipes page displays 6 recipe cards in responsive grid
3. Each card shows image, title, description, time, and difficulty
4. Clicking a card navigates to /recipes/{slug}
5. Recipe detail page shows: hero image, ingredient list, step-by-step instructions
6. Recipe detail page has schema.org JSON-LD in page source
7. "Shop the sauce" CTA appears on each recipe detail page
8. CTA shows actual product(s) used in the recipe with links to shop
9. All 6 recipes reference Jamaica House Brand products
10. Mobile responsive: grid collapses to single column, layout stacks vertically
</verification>

<success_criteria>
- Recipes grid at /recipes shows 6 recipe cards with food photography
- Recipe detail pages have hero image, ingredients, instructions, and product CTA
- Schema.org Recipe JSON-LD is present on all detail pages
- Every recipe features Jamaica House Brand products
- No build errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-content-storytelling/04-03-SUMMARY.md`
</output>
